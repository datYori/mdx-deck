import {
  Image,
} from 'mdx-deck'

<Image
  src='https://raw-labs.com/wp-content/themes/raw-labs/img/logo-raw.svg'
  style={{
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
    width: 250,
    height: 250
  }}>

</Image>

# CI Tier tests

---

## What we have

<Steps>

- Engine CI (~ 2 hours )
<sub>
 running for every PR modifying engine related code
</sub>

- Minikube tests (~ 1 hour )
<sub>
 running for every PR modifying engine related code
</sub>

- Repose CI (~ 20 min )
<sub>
 running for every PR modifying repose related code
</sub>

- Miscellaneous CI
<sub>
<ul>
<li>Base Docker Images</li>
<li>Docs</li>
<li>UI</li>
<li>Versioner</li>
<li>VSCode</li>
</ul>
</sub>

</Steps>

---

## What we want 

<Steps>

- Tier1 Engine CI (~ 10  min )
<sub>
 running for every PR modifying engine related code
</sub>

- Tier2 Engine Tests (~ 2 hours )
<sub>
<ul>
<li>running frequently against main branch state</li>
<li>running On-Demand from a PR state</li>
</ul>
</sub>

- Repose CI (~ 20 min )
<sub>
 running for every PR modifying repose related code
</sub>

- Miscellaneous CI
<sub>
<ul>
<li>Base Docker Images</li>
<li>Compose Docker Images</li>
<li>Docs</li>
<li>UI</li>
<li>Versioner</li>
<li>VSCode</li>
</ul>
</sub>

</Steps>

---

## How 

<Steps>

- Split pipelines
<sub>
<ul>
<li>Tier1 Engine CI</li>
<li>Tier2 Engine CI</li>
</ul>
</sub>
- Scala Annotation
<sub>
<code>
@Tier1
</code>
</sub>

- PR comment
<sub>
<code>
(re)?run tier2( test(s)?)?
</code>
<blockquote>
(run tier2 test, run tier2, run tier2 tests, ...)
</blockquote>
</sub>

</Steps>

---

## Impact on Dev/Release flow

<Steps>

- Faster dev pace

- Need Tier1 tag ruling

- Higher risk to merge bugs into main branch

- Need decision making on every release regarding main brach state

</Steps>